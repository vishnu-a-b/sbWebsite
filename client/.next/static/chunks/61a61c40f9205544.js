(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98286,e=>{"use strict";let s=(0,e.i(74448).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],98286)},4705,e=>{"use strict";let s=(0,e.i(74448).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],4705)},28081,e=>{"use strict";var s=e.i(75779),t=e.i(53312),a=e.i(86805),l=e.i(98286),i=e.i(4705);let r="http://127.0.0.1:5002";function d(){let[e,d]=(0,t.useState)([]),[n,c]=(0,t.useState)(!0),[o,x]=(0,t.useState)(null),[m,h]=(0,t.useState)(null),[p,g]=(0,t.useState)(""),[u,y]=(0,t.useState)(!1),j=async()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("admin_token="))?.split("=")[1],s=await fetch(`${r}/api/donation/pending-approvals`,{headers:{Authorization:`Bearer ${e}`}}),t=await s.json();t.success&&d(t.donations)}catch(e){console.error("Failed to fetch pending approvals:",e)}finally{c(!1)}};(0,t.useEffect)(()=>{j()},[]);let f=async s=>{x(s);try{let t=document.cookie.split("; ").find(e=>e.startsWith("admin_token="))?.split("=")[1],a=await fetch(`${r}/api/donation/${s}/approve`,{method:"PUT",headers:{Authorization:`Bearer ${t}`}});(await a.json()).success&&d(e.filter(e=>e._id!==s))}catch(e){console.error("Failed to approve:",e)}finally{x(null)}},b=async()=>{if(m&&p){x(m._id);try{let s=document.cookie.split("; ").find(e=>e.startsWith("admin_token="))?.split("=")[1],t=await fetch(`${r}/api/donation/${m._id}/reject`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({reason:p})});(await t.json()).success&&(d(e.filter(e=>e._id!==m._id)),y(!1),h(null),g(""))}catch(e){console.error("Failed to reject:",e)}finally{x(null)}}};return(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(a.Clock,{className:"w-6 h-6 text-yellow-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Pending Approvals"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Review and approve offline donations"})]})]}),n?(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-8 text-center text-gray-500",children:"Loading..."}):0===e.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-12 text-center",children:[(0,s.jsx)(l.CheckCircle,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"All caught up!"}),(0,s.jsx)("p",{className:"text-gray-600",children:"No pending donations to review."})]}):(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.donorName}),(0,s.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Pending"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Amount"}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.currency," ",e.amount.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Payment Method"}),(0,s.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:e.offlinePaymentMethod.replace("_"," ")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Type"}),(0,s.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:e.donationType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Added By"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.addedBy?.username||"N/A"})]})]}),e.notes&&(0,s.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.notes})})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,s.jsxs)("button",{onClick:()=>f(e._id),disabled:o===e._id,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[(0,s.jsx)(l.CheckCircle,{className:"w-4 h-4"}),"Approve"]}),(0,s.jsxs)("button",{onClick:()=>{h(e),y(!0)},disabled:o===e._id,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:[(0,s.jsx)(i.XCircle,{className:"w-4 h-4"}),"Reject"]})]})]})},e._id))}),u&&m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reject Donation"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["Please provide a reason for rejecting ",m.donorName,"'s donation of ",m.currency," ",m.amount.toLocaleString(),"."]}),(0,s.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary mb-4",rows:3,placeholder:"Enter rejection reason..."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:b,disabled:!p||o===m._id,className:"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Confirm Reject"}),(0,s.jsx)("button",{onClick:()=>{y(!1),h(null),g("")},className:"flex-1 border border-gray-300 py-2 rounded-lg hover:bg-gray-50",children:"Cancel"})]})]})})]})}e.s(["default",()=>d])}]);