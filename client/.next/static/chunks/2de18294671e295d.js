(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44415,e=>{"use strict";let t=(0,e.i(74448).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],44415)},79272,e=>{"use strict";e.i(30755);var t=e.i(75779),a=e.i(53312),s=e.i(24446),l=e.i(44415);let r=(0,e.i(74448).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);function i(){let[e,i]=(0,a.useState)([]),[d,n]=(0,a.useState)(!0),[c,o]=(0,a.useState)({approvalStatus:""}),[x,p]=(0,a.useState)({page:1,total:0,pages:0}),m=async()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("admin_token="))?.split("=")[1],t=new URLSearchParams({page:x.page.toString(),limit:"20",...c.approvalStatus&&{approvalStatus:c.approvalStatus}}),a=await fetch(`http://127.0.0.1:5002/api/donation/offline/history?${t}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();s.success&&(i(s.donations),p(s.pagination))}catch(e){console.error("Failed to fetch history:",e)}finally{n(!1)}};return(0,a.useEffect)(()=>{m()},[x.page,c]),(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(s.History,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Offline Donation History"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Track all offline payment records"})]})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90",children:[(0,t.jsx)(l.Download,{className:"w-4 h-4"}),"Export"]})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("select",{value:c.approvalStatus,onChange:e=>o({...c,approvalStatus:e.target.value}),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,t.jsx)("option",{value:"REJECTED",children:"Rejected"}),(0,t.jsx)("option",{value:"PENDING",children:"Pending"})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[d?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Receipt #"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Donor"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Amount"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Method"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Added By"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Date"})]})}),(0,t.jsx)("tbody",{className:"divide-y",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-mono text-sm text-gray-900",children:e.receiptNumber||"-"}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.donorName}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsxs)("td",{className:"px-6 py-4 font-semibold text-gray-900",children:[e.currency," ",e.amount.toLocaleString()]}),(0,t.jsx)("td",{className:"px-6 py-4 capitalize text-gray-700",children:e.offlinePaymentMethod?.replace("_"," ")||"-"}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${{APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PENDING:"bg-yellow-100 text-yellow-800"}[e.approvalStatus]||"bg-gray-100 text-gray-800"}`,children:e.approvalStatus})}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.addedBy?.username||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-600",children:new Date(e.createdAt).toLocaleDateString("en-IN")})]},e._id))})]}),x.pages>1&&(0,t.jsxs)("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Page ",x.page," of ",x.pages]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>p({...x,page:x.page-1}),disabled:1===x.page,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>p({...x,page:x.page+1}),disabled:x.page===x.pages,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"Next"})]})]})]})]})}e.s(["default",()=>i],79272)}]);