(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83671,e=>{"use strict";let a=(0,e.i(74448).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>a],83671)},63688,e=>{"use strict";let a=(0,e.i(74448).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],63688)},67878,e=>{"use strict";let a=(0,e.i(74448).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],67878)},2797,e=>{"use strict";let a=(0,e.i(74448).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],2797)},75483,e=>{"use strict";var a=e.i(75779),t=e.i(53312),s=e.i(39528),r=e.i(67878),l=e.i(2797),i=e.i(63688),d=e.i(67180),n=e.i(83671);let c="http://127.0.0.1:5002",o=[{value:"super_admin",label:"Super Admin",color:"bg-purple-100 text-purple-800"},{value:"agent",label:"Agent",color:"bg-blue-100 text-blue-800"},{value:"approver",label:"Approver",color:"bg-green-100 text-green-800"},{value:"accounts",label:"Accounts",color:"bg-orange-100 text-orange-800"}];function m(){let[e,m]=(0,t.useState)([]),[x,u]=(0,t.useState)(!0),[p,h]=(0,t.useState)(!1),[y,g]=(0,t.useState)(null),[b,f]=(0,t.useState)({username:"",email:"",password:"",role:"agent"}),[j,v]=(0,t.useState)(""),[N,w]=(0,t.useState)(!1),A=()=>document.cookie.split("; ").find(e=>e.startsWith("admin_token="))?.split("=")[1],k=async()=>{try{let e=await fetch(`${c}/api/admin/users`,{headers:{Authorization:`Bearer ${A()}`}}),a=await e.json();a.success&&m(a.admins)}catch(e){console.error("Failed to fetch admins:",e)}finally{u(!1)}};(0,t.useEffect)(()=>{k()},[]);let S=async e=>{e.preventDefault(),w(!0),v("");try{if(y){let e=await fetch(`${c}/api/admin/users/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A()}`},body:JSON.stringify({username:b.username,email:b.email,role:b.role})}),a=await e.json();a.success?(k(),$()):v(a.error||"Failed to update admin")}else{let e=await fetch(`${c}/api/admin/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A()}`},body:JSON.stringify(b)}),a=await e.json();a.success?(k(),$()):v(a.error||"Failed to create admin")}}catch(e){v("Failed to connect to server")}finally{w(!1)}},C=async e=>{if(confirm(`Are you sure you want to deactivate ${e.username}?`))try{let a=await fetch(`${c}/api/admin/users/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${A()}`}}),t=await a.json();t.success?k():alert(t.error||"Failed to deactivate admin")}catch(e){alert("Failed to connect to server")}},$=()=>{h(!1),g(null),f({username:"",email:"",password:"",role:"agent"}),v("")};return(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(s.Users,{className:"w-6 h-6 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Users"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage admin accounts and roles"})]})]}),(0,a.jsxs)("button",{onClick:()=>{g(null),f({username:"",email:"",password:"",role:"agent"}),v(""),h(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90",children:[(0,a.jsx)(r.Plus,{className:"w-4 h-4"}),"Add Admin"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:x?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:e.map(e=>{var t,s;let r,n;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Shield,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.username}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(t=e.role,r=o.find(e=>e.value===t),r?.color||"bg-gray-100 text-gray-800")}`,children:(s=e.role,n=o.find(e=>e.value===s),n?.label||s)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-600",children:new Date(e.createdAt).toLocaleDateString("en-IN")}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{g(e),f({username:e.username,email:e.email,password:"",role:e.role}),v(""),h(!0)},className:"p-2 hover:bg-gray-100 rounded-lg",title:"Edit",children:(0,a.jsx)(l.Edit,{className:"w-4 h-4 text-gray-600"})}),e.isActive&&(0,a.jsx)("button",{onClick:()=>C(e),className:"p-2 hover:bg-red-50 rounded-lg",title:"Deactivate",children:(0,a.jsx)(i.Trash2,{className:"w-4 h-4 text-red-600"})})]})})]},e.id)})})]})}),p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:y?"Edit Admin":"Add New Admin"}),(0,a.jsx)("button",{onClick:$,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(n.X,{className:"w-5 h-5 text-gray-500"})})]}),j&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 text-sm",children:j}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),(0,a.jsx)("input",{type:"text",required:!0,value:b.username,onChange:e=>f({...b,username:e.target.value}),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter username"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,a.jsx)("input",{type:"email",required:!0,value:b.email,onChange:e=>f({...b,email:e.target.value}),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"admin@example.com"})]}),!y&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,a.jsx)("input",{type:"password",required:!y,value:b.password,onChange:e=>f({...b,password:e.target.value}),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),(0,a.jsx)("select",{required:!0,value:b.role,onChange:e=>f({...b,role:e.target.value}),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent",children:o.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:N,className:"flex-1 bg-primary text-white py-3 rounded-xl font-semibold hover:bg-primary/90 disabled:opacity-50",children:N?"Saving...":y?"Update Admin":"Create Admin"}),(0,a.jsx)("button",{type:"button",onClick:$,className:"px-6 py-3 border border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})]})})]})}e.s(["default",()=>m])}]);