(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98286,e=>{"use strict";let a=(0,e.i(74448).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],98286)},7146,e=>{"use strict";let a=(0,e.i(74448).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],7146)},67878,e=>{"use strict";let a=(0,e.i(74448).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],67878)},2797,e=>{"use strict";let a=(0,e.i(74448).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],2797)},4705,e=>{"use strict";let a=(0,e.i(74448).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],4705)},86892,e=>{"use strict";let a=(0,e.i(74448).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>a],86892)},98836,e=>{"use strict";let a=(0,e.i(74448).default)("circle-pause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);e.s(["PauseCircle",()=>a],98836)},97113,e=>{"use strict";let a=(0,e.i(74448).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>a],97113)},13878,e=>{"use strict";e.i(30755);var a=e.i(75779),t=e.i(53312),s=e.i(27614),l=e.i(36277),r=e.i(67878),i=e.i(86892),c=e.i(97113),n=e.i(2797),d=e.i(7146);let o=(0,e.i(74448).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var m=e.i(98286),x=e.i(86805),p=e.i(4705),u=e.i(98836);let g="http://127.0.0.1:5002",h={draft:{label:"Draft",color:"bg-gray-100 text-gray-700",icon:x.Clock},active:{label:"Active",color:"bg-green-100 text-green-700",icon:m.CheckCircle},paused:{label:"Paused",color:"bg-yellow-100 text-yellow-700",icon:u.PauseCircle},completed:{label:"Completed",color:"bg-blue-100 text-blue-700",icon:m.CheckCircle},cancelled:{label:"Cancelled",color:"bg-red-100 text-red-700",icon:p.XCircle}};function y(){let[e,m]=(0,t.useState)([]),[x,p]=(0,t.useState)(!0),[u,y]=(0,t.useState)(""),[f,b]=(0,t.useState)(""),[j,v]=(0,t.useState)({page:1,limit:20,total:0,pages:0});(0,t.useEffect)(()=>{N()},[j.page,f]);let N=async()=>{try{let e=new URLSearchParams({page:j.page.toString(),limit:j.limit.toString()});f&&e.append("status",f);let a=await fetch(`${g}/api/campaign?${e}`,{credentials:"include"}),t=await a.json();t.success&&(m(t.campaigns),v(e=>({...e,...t.pagination})))}catch(e){console.error("Failed to fetch campaigns:",e)}finally{p(!1)}},w=async(e,a)=>{try{let t=await fetch(`${g}/api/campaign/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:a})}),s=await t.json();s.success?N():alert(s.error||"Failed to update status")}catch(e){console.error("Failed to update status:",e),alert("Failed to update status")}},C=async e=>{if(confirm("Are you sure you want to delete this campaign?"))try{let a=await fetch(`${g}/api/campaign/${e}`,{method:"DELETE",credentials:"include"}),t=await a.json();t.success?N():alert(t.error||"Failed to delete campaign")}catch(e){console.error("Failed to delete campaign:",e),alert("Failed to delete campaign")}},k=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),S=e.filter(e=>e.title.toLowerCase().includes(u.toLowerCase()));return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(l.Target,{className:"w-7 h-7 text-primary"}),"Campaigns"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage donation campaigns"})]}),(0,a.jsxs)(s.default,{href:"/admin/campaigns/create",className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[(0,a.jsx)(r.Plus,{className:"w-4 h-4"}),"Create Campaign"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(i.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search campaigns...",value:u,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Filter,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"paused",children:"Paused"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]})}),x?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===S.length?(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[(0,a.jsx)(l.Target,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No campaigns found"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Create your first campaign to get started."}),(0,a.jsxs)(s.default,{href:"/admin/campaigns/create",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90",children:[(0,a.jsx)(r.Plus,{className:"w-4 h-4"}),"Create Campaign"]})]}):(0,a.jsx)("div",{className:"grid gap-6",children:S.map(e=>{let t=h[e.status]||h.draft,l=t.icon,r=Math.min(Math.round(e.raisedAmount/e.goalAmount*100),100);return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:[(0,a.jsx)(l,{className:"w-3 h-3"}),t.label]}),e.isFeatured&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium",children:"Featured"})]}),e.shortDescription&&(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:e.shortDescription})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.default,{href:`/admin/campaigns/${e._id}`,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View/Edit",children:(0,a.jsx)(n.Edit,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsx)(s.default,{href:`/donate?campaign=${e.slug}`,target:"_blank",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View on Website",children:(0,a.jsx)(d.Eye,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(o,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border py-1 hidden group-hover:block z-10",children:["draft"===e.status&&(0,a.jsx)("button",{onClick:()=>w(e._id,"active"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 text-green-600",children:"Activate Campaign"}),"active"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>w(e._id,"paused"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 text-yellow-600",children:"Pause Campaign"}),(0,a.jsx)("button",{onClick:()=>w(e._id,"completed"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 text-blue-600",children:"Mark Completed"})]}),"paused"===e.status&&(0,a.jsx)("button",{onClick:()=>w(e._id,"active"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 text-green-600",children:"Resume Campaign"}),0===e.donorCount&&(0,a.jsx)("button",{onClick:()=>C(e._id),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 text-red-600",children:"Delete Campaign"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:[k(e.raisedAmount)," raised"]}),(0,a.jsxs)("span",{className:"font-medium",children:[k(e.goalAmount)," goal"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:`h-2 rounded-full transition-all ${r>=100?"bg-green-500":"bg-primary"}`,style:{width:`${r}%`}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[r,"% funded"]}),(0,a.jsxs)("span",{children:[e.donorCount," donors"]})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Started: ",new Date(e.startDate).toLocaleDateString()]}),e.endDate&&(0,a.jsxs)("span",{children:["Ends: ",new Date(e.endDate).toLocaleDateString()]})]})]},e._id)})}),j.pages>1&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,a.jsx)("button",{onClick:()=>v(e=>({...e,page:e.page-1})),disabled:1===j.page,className:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2",children:["Page ",j.page," of ",j.pages]}),(0,a.jsx)("button",{onClick:()=>v(e=>({...e,page:e.page+1})),disabled:j.page===j.pages,className:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})}e.s(["default",()=>y],13878)}]);