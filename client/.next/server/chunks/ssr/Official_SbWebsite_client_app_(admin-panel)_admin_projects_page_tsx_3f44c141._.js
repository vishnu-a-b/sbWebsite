module.exports=[58200,a=>{"use strict";var b=a.i(84419),c=a.i(63661),d=a.i(46969),e=a.i(77574),f=a.i(86793),g=a.i(87312),h=a.i(85142),i=a.i(61232),i=i,j=a.i(69922),k=a.i(26214),l=a.i(26090);function m({project:a,onClose:d,onSave:e}){let[g,h]=(0,c.useState)({projectName:a?.projectName||"",shortDescription:a?.shortDescription||"",fullDescription:a?.fullDescription||"",featuredImage:a?.featuredImage||"",gallery:a?.gallery||[],priority:a?.priority||0,isActive:a?.isActive??!0,startDate:a?.startDate?new Date(a.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],expiryDate:a?.expiryDate?new Date(a.expiryDate).toISOString().split("T")[0]:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],showOnFirstFace:a?.showOnFirstFace||!1,showOnSecondFace:a?.showOnSecondFace||!1}),[i,m]=(0,c.useState)(""),[n,o]=(0,c.useState)({}),p=(a,b)=>{h(c=>({...c,[a]:b})),n[a]&&o(b=>({...b,[a]:void 0}))};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Project":"Add New Project"}),(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(j.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:a=>{let b;a.preventDefault(),b={},g.projectName.trim()||(b.projectName="Project name is required"),g.shortDescription.trim()||(b.shortDescription="Short description is required"),g.fullDescription.trim()||(b.fullDescription="Full description is required"),g.featuredImage.trim()||(b.featuredImage="Featured image is required"),new Date(g.startDate)>new Date(g.expiryDate)&&(b.expiryDate="Expiry date must be after start date"),o(b),0===Object.keys(b).length&&e(g)},className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Project Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:g.projectName,onChange:a=>p("projectName",a.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent ${n.projectName?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Community Health Program"}),n.projectName&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.projectName})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Short Description ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("textarea",{value:g.shortDescription,onChange:a=>p("shortDescription",a.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent ${n.shortDescription?"border-red-500":"border-gray-300"}`,placeholder:"Brief overview (for cards/previews)",rows:2}),n.shortDescription&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.shortDescription})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Description ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("textarea",{value:g.fullDescription,onChange:a=>p("fullDescription",a.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent ${n.fullDescription?"border-red-500":"border-gray-300"}`,placeholder:"Detailed project information",rows:6}),n.fullDescription&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.fullDescription})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Featured Image ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"flex gap-4 items-start",children:[g.featuredImage&&(0,b.jsxs)("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-gray-200",children:[(0,b.jsx)("img",{src:g.featuredImage,alt:"Featured",className:"w-full h-full object-cover"}),(0,b.jsx)("button",{type:"button",onClick:()=>p("featuredImage",""),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition-colors",children:(0,b.jsx)(j.X,{className:"w-3 h-3"})})]}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(l.default,{type:"image",currentUrl:g.featuredImage,onUploadComplete:a=>p("featuredImage",a),label:g.featuredImage?"Change Image":"Upload Featured Image",maxSize:5})})]}),n.featuredImage&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.featuredImage})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Gallery Images"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:g.gallery.map((a,c)=>(0,b.jsxs)("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 aspect-video bg-gray-50",children:[(0,b.jsx)("img",{src:a,alt:`Gallery ${c+1}`,className:"w-full h-full object-cover"}),(0,b.jsx)("button",{type:"button",onClick:()=>{h(a=>({...a,gallery:a.gallery.filter((a,b)=>b!==c)}))},className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})]},c))}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-dashed border-gray-300",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Add to Gallery"}),(0,b.jsx)(l.default,{type:"image",currentUrl:"",onUploadComplete:a=>{h(b=>({...b,gallery:[...b.gallery,a]}))},label:"Upload Gallery Image",maxSize:5})]})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),(0,b.jsx)("input",{type:"number",value:g.priority,onChange:a=>p("priority",parseInt(a.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",min:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:g.startDate,onChange:a=>p("startDate",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expiry Date"}),(0,b.jsx)("input",{type:"date",value:g.expiryDate,onChange:a=>p("expiryDate",a.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent ${n.expiryDate?"border-red-500":"border-gray-300"}`}),n.expiryDate&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.expiryDate})]})]}),(0,b.jsxs)("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.isActive,onChange:a=>p("isActive",a.target.checked),className:"w-5 h-5 text-primary rounded focus:ring-2 focus:ring-primary"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"Active"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.showOnFirstFace,onChange:a=>p("showOnFirstFace",a.target.checked),className:"w-5 h-5 text-primary rounded focus:ring-2 focus:ring-primary"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"Show on First Face (Above Fold)"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.showOnSecondFace,onChange:a=>p("showOnSecondFace",a.target.checked),className:"w-5 h-5 text-primary rounded focus:ring-2 focus:ring-primary"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"Show on Second Face (Below Fold)"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",className:"flex-1 bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors font-medium flex items-center justify-center gap-2",children:[(0,b.jsx)(k.Save,{className:"w-5 h-5"}),a?"Update Project":"Create Project"]})]})]})]})})}var n=a.i(46240);let o=(0,n.createServerReference)("0031a0ec2c91737f621f2cce532b0218cf38bcafec",n.callServer,void 0,n.findSourceMapURL,"getProjects"),p=(0,n.createServerReference)("404aa66fe8a1cea12bc8ce2383422b9f1bf3716dee",n.callServer,void 0,n.findSourceMapURL,"createProject"),q=(0,n.createServerReference)("604a0fc593f4b81aebdd8974bfe2e2e858547650bc",n.callServer,void 0,n.findSourceMapURL,"updateProject"),r=(0,n.createServerReference)("40bae16c5b18520b556320f365cdc9c1b1a703904d",n.callServer,void 0,n.findSourceMapURL,"deleteProject");function s(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[n,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null);(0,c.useEffect)(()=>{v()},[]);let v=async()=>{try{let a=await o();j(a),l(!1)}catch(a){console.error("Error fetching projects:",a),l(!1)}},w=async a=>{try{t?await q(t._id,a):await p(a),s(!1),u(null),v()}catch(a){console.error("Error saving project:",a),alert("Failed to save project")}},x=async a=>{if(confirm("Are you sure you want to delete this project?"))try{await r(a),v()}catch(a){console.error("Error deleting project:",a),alert("Failed to delete project")}};return(0,b.jsxs)("div",{className:"p-8",children:[n&&(0,b.jsx)(m,{project:t,onClose:()=>{s(!1),u(null)},onSave:w}),(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Featured Projects"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage community programs, special initiatives & campaigns"})]}),(0,b.jsxs)("button",{onClick:()=>s(!0),className:"bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 flex items-center gap-2 transition-all shadow-lg hover:shadow-xl",children:[(0,b.jsx)(d.Plus,{className:"w-5 h-5"}),"Add New Project"]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"CMS Controls"}),(0,b.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,b.jsxs)("li",{children:["• Projects display based on ",(0,b.jsx)("strong",{children:"Priority"})," (higher first)"]}),(0,b.jsxs)("li",{children:["• Only ",(0,b.jsx)("strong",{children:"Active"})," projects within ",(0,b.jsx)("strong",{children:"Start/Expiry dates"})," are shown"]}),(0,b.jsxs)("li",{children:["• ",(0,b.jsx)("strong",{children:"First Face"}),": Shows above the fold on homepage"]}),(0,b.jsxs)("li",{children:["• ",(0,b.jsx)("strong",{children:"Second Face"}),": Shows below the fold on homepage"]}),(0,b.jsx)("li",{children:"• Upload featured image + gallery images for each project"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k?(0,b.jsx)("div",{className:"col-span-full text-center py-12 text-gray-500",children:"Loading projects..."}):0===a.length?(0,b.jsx)("div",{className:"col-span-full text-center py-12 text-gray-500",children:'No projects found. Click "Add New Project" to create one.'}):a.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[(0,b.jsxs)("div",{className:"relative h-48 bg-gray-200",children:[a.featuredImage?(0,b.jsx)("img",{src:a.featuredImage,alt:a.projectName,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(i.default,{className:"w-12 h-12 text-gray-400"})}),(0,b.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2",children:[a.showOnFirstFace&&(0,b.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded",children:"1st Face"}),a.showOnSecondFace&&(0,b.jsx)("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded",children:"2nd Face"})]}),(0,b.jsx)("div",{className:"absolute top-2 left-2",children:(0,b.jsxs)("span",{className:"bg-primary text-white text-xs px-2 py-1 rounded font-semibold",children:["Priority: ",a.priority]})})]}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:a.projectName}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:a.shortDescription}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[(0,b.jsx)("div",{children:a.isActive?(0,b.jsxs)("span",{className:"flex items-center gap-1 text-green-600 font-medium",children:[(0,b.jsx)(g.Eye,{className:"w-3 h-3"}),"Active"]}):(0,b.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,b.jsx)(h.EyeOff,{className:"w-3 h-3"}),"Inactive"]})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{children:new Date(a.startDate).toLocaleDateString()}),(0,b.jsxs)("div",{children:["to ",new Date(a.expiryDate).toLocaleDateString()]})]})]}),a.gallery&&a.gallery.length>0&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:[(0,b.jsx)(i.default,{className:"w-3 h-3 inline mr-1"}),a.gallery.length," images in gallery"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{u(a),s(!0)},className:"flex-1 bg-blue-50 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-100 flex items-center justify-center gap-2 transition-colors",children:[(0,b.jsx)(e.Edit,{className:"w-4 h-4"}),"Edit"]}),(0,b.jsx)("button",{onClick:()=>x(a._id),className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg hover:bg-red-100 transition-colors",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})]})]})]},a._id))})]})}a.s(["default",()=>s],58200)}];

//# sourceMappingURL=Official_SbWebsite_client_app_%28admin-panel%29_admin_projects_page_tsx_3f44c141._.js.map