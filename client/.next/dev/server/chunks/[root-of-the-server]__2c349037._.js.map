{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/lib/db.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\ninterface MongooseCache {\n  conn: typeof mongoose | null;\n  promise: Promise<typeof mongoose> | null;\n}\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var mongoose: MongooseCache | undefined;\n}\n\nlet cached: MongooseCache = global.mongoose || { conn: null, promise: null };\n\nif (!cached) {\n  cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function connectToDatabase() {\n  if (!MONGODB_URI) {\n    // Return mock connection or throw error depending on strictness.\n    // For now, we'll log a warning if it's missing but return null to prevent app crash if just building UI.\n    console.warn('MONGODB_URI is not defined in environment variables. Database operations will fail.');\n    return null;\n  }\n\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      return mongoose;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    throw e;\n  }\n\n  return cached.conn;\n}\n\nexport default connectToDatabase;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAY3C,IAAI,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE3E,IAAI,CAAC,QAAQ;IACX,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,IAAI,CAAC,aAAa;QAChB,iEAAiE;QACjE,yGAAyG;QACzG,QAAQ,IAAI,CAAC;QACb,OAAO;IACT;IAEA,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,sMAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/models/Payment.ts"],"sourcesContent":["import mongoose, { Schema, model, models } from 'mongoose';\n\nconst PaymentSchema = new Schema({\n  donorName: { type: String, required: true },\n  email: { type: String, required: true },\n  phone: { type: String },\n  amount: { type: Number, required: true },\n  currency: { type: String, default: 'INR' },\n  paymentMethod: { type: String, enum: ['card', 'upi', 'netbanking', 'bank_transfer', 'cash', 'other'], required: true },\n  transactionId: { type: String, unique: true, sparse: true },\n  status: { type: String, enum: ['pending', 'completed', 'failed', 'refunded'], default: 'pending' },\n  purpose: { type: String, enum: ['general', 'medical', 'dialysis', 'infrastructure', 'other'], default: 'general' },\n  notes: { type: String },\n  receiptUrl: { type: String },\n  benevityDonation: { type: Boolean, default: false },\n}, { timestamps: true });\n\nconst Payment = models.Payment || model('Payment', PaymentSchema);\n\nexport default Payment;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,IAAI,qMAAM,CAAC;IAC/B,WAAW;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC1C,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,OAAO;QAAE,MAAM;IAAO;IACtB,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,UAAU;QAAE,MAAM;QAAQ,SAAS;IAAM;IACzC,eAAe;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAQ;YAAO;YAAc;YAAiB;YAAQ;SAAQ;QAAE,UAAU;IAAK;IACrH,eAAe;QAAE,MAAM;QAAQ,QAAQ;QAAM,QAAQ;IAAK;IAC1D,QAAQ;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAW;YAAa;YAAU;SAAW;QAAE,SAAS;IAAU;IACjG,SAAS;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAW;YAAW;YAAY;YAAkB;SAAQ;QAAE,SAAS;IAAU;IACjH,OAAO;QAAE,MAAM;IAAO;IACtB,YAAY;QAAE,MAAM;IAAO;IAC3B,kBAAkB;QAAE,MAAM;QAAS,SAAS;IAAM;AACpD,GAAG;IAAE,YAAY;AAAK;AAEtB,MAAM,UAAU,qMAAM,CAAC,OAAO,IAAI,IAAA,oMAAK,EAAC,WAAW;uCAEpC"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/models/Volunteer.ts"],"sourcesContent":["import mongoose, { Schema, model, models } from 'mongoose';\n\nconst VolunteerSchema = new Schema({\n  name: { type: String, required: true },\n  email: { type: String, required: true },\n  phone: { type: String, required: true },\n  role: { type: String, default: 'General' },\n  status: { \n    type: String, \n    enum: ['pending', 'approved', 'rejected'], \n    default: 'pending' \n  },\n}, { timestamps: true });\n\nconst Volunteer = models.Volunteer || model('Volunteer', VolunteerSchema);\n\nexport default Volunteer;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB,IAAI,qMAAM,CAAC;IACjC,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,MAAM;QAAE,MAAM;QAAQ,SAAS;IAAU;IACzC,QAAQ;QACN,MAAM;QACN,MAAM;YAAC;YAAW;YAAY;SAAW;QACzC,SAAS;IACX;AACF,GAAG;IAAE,YAAY;AAAK;AAEtB,MAAM,YAAY,qMAAM,CAAC,SAAS,IAAI,IAAA,oMAAK,EAAC,aAAa;uCAE1C"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/models/Contact.ts"],"sourcesContent":["import mongoose, { Schema, model, models } from 'mongoose';\n\nconst ContactSchema = new Schema({\n  name: { type: String, required: true },\n  email: { type: String, required: true },\n  phone: { type: String },\n  message: { type: String, required: true },\n  status: { \n    type: String, \n    enum: ['new', 'read', 'replied'], \n    default: 'new' \n  },\n}, { timestamps: true });\n\nconst Contact = models.Contact || model('Contact', ContactSchema);\n\nexport default Contact;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,IAAI,qMAAM,CAAC;IAC/B,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,OAAO;QAAE,MAAM;IAAO;IACtB,SAAS;QAAE,MAAM;QAAQ,UAAU;IAAK;IACxC,QAAQ;QACN,MAAM;QACN,MAAM;YAAC;YAAO;YAAQ;SAAU;QAChC,SAAS;IACX;AACF,GAAG;IAAE,YAAY;AAAK;AAEtB,MAAM,UAAU,qMAAM,CAAC,OAAO,IAAI,IAAA,oMAAK,EAAC,WAAW;uCAEpC"}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/app/api/stats/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport connectToDatabase from '@/lib/db';\nimport Payment from '@/models/Payment';\nimport Volunteer from '@/models/Volunteer';\nimport Contact from '@/models/Contact';\n\nexport async function GET() {\n  try {\n    await connectToDatabase();\n\n    // Get payment statistics\n    const totalPayments = await Payment.countDocuments();\n    const completedPayments = await Payment.countDocuments({ status: 'completed' });\n\n    const paymentAggregation = await Payment.aggregate([\n      { $match: { status: 'completed' } },\n      {\n        $group: {\n          _id: null,\n          totalAmount: { $sum: '$amount' },\n        }\n      }\n    ]);\n\n    const totalDonations = paymentAggregation[0]?.totalAmount || 0;\n\n    // Get other statistics\n    const totalVolunteers = await Volunteer.countDocuments();\n    const totalContacts = await Contact.countDocuments();\n\n    // Get recent payments (last 30 days)\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n    const recentPayments = await Payment.countDocuments({\n      createdAt: { $gte: thirtyDaysAgo },\n      status: 'completed'\n    });\n\n    // Monthly donation trend\n    const monthlyTrend = await Payment.aggregate([\n      {\n        $match: {\n          status: 'completed',\n          createdAt: { $gte: new Date(new Date().getFullYear(), 0, 1) }\n        }\n      },\n      {\n        $group: {\n          _id: { $month: '$createdAt' },\n          amount: { $sum: '$amount' },\n          count: { $sum: 1 }\n        }\n      },\n      { $sort: { _id: 1 } }\n    ]);\n\n    return NextResponse.json({\n      payments: {\n        total: totalPayments,\n        completed: completedPayments,\n        totalAmount: totalDonations,\n        recent: recentPayments,\n      },\n      volunteers: {\n        total: totalVolunteers,\n      },\n      contacts: {\n        total: totalContacts,\n      },\n      monthlyTrend,\n    });\n  } catch (error) {\n    console.error('Error fetching stats:', error);\n    return NextResponse.json(\n      { error: 'Failed to fetch statistics' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,IAAA,yJAAiB;QAEvB,yBAAyB;QACzB,MAAM,gBAAgB,MAAM,iKAAO,CAAC,cAAc;QAClD,MAAM,oBAAoB,MAAM,iKAAO,CAAC,cAAc,CAAC;YAAE,QAAQ;QAAY;QAE7E,MAAM,qBAAqB,MAAM,iKAAO,CAAC,SAAS,CAAC;YACjD;gBAAE,QAAQ;oBAAE,QAAQ;gBAAY;YAAE;YAClC;gBACE,QAAQ;oBACN,KAAK;oBACL,aAAa;wBAAE,MAAM;oBAAU;gBACjC;YACF;SACD;QAED,MAAM,iBAAiB,kBAAkB,CAAC,EAAE,EAAE,eAAe;QAE7D,uBAAuB;QACvB,MAAM,kBAAkB,MAAM,mKAAS,CAAC,cAAc;QACtD,MAAM,gBAAgB,MAAM,iKAAO,CAAC,cAAc;QAElD,qCAAqC;QACrC,MAAM,gBAAgB,IAAI;QAC1B,cAAc,OAAO,CAAC,cAAc,OAAO,KAAK;QAEhD,MAAM,iBAAiB,MAAM,iKAAO,CAAC,cAAc,CAAC;YAClD,WAAW;gBAAE,MAAM;YAAc;YACjC,QAAQ;QACV;QAEA,yBAAyB;QACzB,MAAM,eAAe,MAAM,iKAAO,CAAC,SAAS,CAAC;YAC3C;gBACE,QAAQ;oBACN,QAAQ;oBACR,WAAW;wBAAE,MAAM,IAAI,KAAK,IAAI,OAAO,WAAW,IAAI,GAAG;oBAAG;gBAC9D;YACF;YACA;gBACE,QAAQ;oBACN,KAAK;wBAAE,QAAQ;oBAAa;oBAC5B,QAAQ;wBAAE,MAAM;oBAAU;oBAC1B,OAAO;wBAAE,MAAM;oBAAE;gBACnB;YACF;YACA;gBAAE,OAAO;oBAAE,KAAK;gBAAE;YAAE;SACrB;QAED,OAAO,mLAAY,CAAC,IAAI,CAAC;YACvB,UAAU;gBACR,OAAO;gBACP,WAAW;gBACX,aAAa;gBACb,QAAQ;YACV;YACA,YAAY;gBACV,OAAO;YACT;YACA,UAAU;gBACR,OAAO;YACT;YACA;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,mLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}