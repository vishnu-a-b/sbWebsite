{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/lib/db.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\ninterface MongooseCache {\n  conn: typeof mongoose | null;\n  promise: Promise<typeof mongoose> | null;\n}\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var mongoose: MongooseCache | undefined;\n}\n\nlet cached: MongooseCache = global.mongoose || { conn: null, promise: null };\n\nif (!cached) {\n  cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function connectToDatabase() {\n  if (!MONGODB_URI) {\n    // Return mock connection or throw error depending on strictness.\n    // For now, we'll log a warning if it's missing but return null to prevent app crash if just building UI.\n    console.warn('MONGODB_URI is not defined in environment variables. Database operations will fail.');\n    return null;\n  }\n\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      return mongoose;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    throw e;\n  }\n\n  return cached.conn;\n}\n\nexport default connectToDatabase;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAY3C,IAAI,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE3E,IAAI,CAAC,QAAQ;IACX,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,IAAI,CAAC,aAAa;QAChB,iEAAiE;QACjE,yGAAyG;QACzG,QAAQ,IAAI,CAAC;QACb,OAAO;IACT;IAEA,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,sMAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/models/Payment.ts"],"sourcesContent":["import mongoose, { Schema, model, models } from 'mongoose';\n\nconst PaymentSchema = new Schema({\n  donorName: { type: String, required: true },\n  email: { type: String, required: true },\n  phone: { type: String },\n  amount: { type: Number, required: true },\n  currency: { type: String, default: 'INR' },\n  paymentMethod: { type: String, enum: ['card', 'upi', 'netbanking', 'bank_transfer', 'cash', 'other'], required: true },\n  transactionId: { type: String, unique: true, sparse: true },\n  status: { type: String, enum: ['pending', 'completed', 'failed', 'refunded'], default: 'pending' },\n  purpose: { type: String, enum: ['general', 'medical', 'dialysis', 'infrastructure', 'other'], default: 'general' },\n  notes: { type: String },\n  receiptUrl: { type: String },\n  benevityDonation: { type: Boolean, default: false },\n}, { timestamps: true });\n\nconst Payment = models.Payment || model('Payment', PaymentSchema);\n\nexport default Payment;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,IAAI,qMAAM,CAAC;IAC/B,WAAW;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC1C,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,OAAO;QAAE,MAAM;IAAO;IACtB,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,UAAU;QAAE,MAAM;QAAQ,SAAS;IAAM;IACzC,eAAe;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAQ;YAAO;YAAc;YAAiB;YAAQ;SAAQ;QAAE,UAAU;IAAK;IACrH,eAAe;QAAE,MAAM;QAAQ,QAAQ;QAAM,QAAQ;IAAK;IAC1D,QAAQ;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAW;YAAa;YAAU;SAAW;QAAE,SAAS;IAAU;IACjG,SAAS;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAW;YAAW;YAAY;YAAkB;SAAQ;QAAE,SAAS;IAAU;IACjH,OAAO;QAAE,MAAM;IAAO;IACtB,YAAY;QAAE,MAAM;IAAO;IAC3B,kBAAkB;QAAE,MAAM;QAAS,SAAS;IAAM;AACpD,GAAG;IAAE,YAAY;AAAK;AAEtB,MAAM,UAAU,qMAAM,CAAC,OAAO,IAAI,IAAA,oMAAK,EAAC,WAAW;uCAEpC"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishnuab/Official/SbWebsite/client/app/api/payment/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport connectToDatabase from '@/lib/db';\nimport Payment from '@/models/Payment';\n\nexport async function GET() {\n  try {\n    await connectToDatabase();\n    const payments = await Payment.find({}).sort({ createdAt: -1 });\n    return NextResponse.json(payments);\n  } catch (error) {\n    console.error('Error fetching payments:', error);\n    return NextResponse.json(\n      { error: 'Failed to fetch payments' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    await connectToDatabase();\n    const body = await request.json();\n    const payment = await Payment.create(body);\n    return NextResponse.json(payment, { status: 201 });\n  } catch (error) {\n    console.error('Error creating payment:', error);\n    return NextResponse.json(\n      { error: 'Failed to create payment' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PATCH(request: NextRequest) {\n  try {\n    await connectToDatabase();\n    const { id, ...updates } = await request.json();\n    const payment = await Payment.findByIdAndUpdate(id, updates, { new: true });\n\n    if (!payment) {\n      return NextResponse.json(\n        { error: 'Payment not found' },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json(payment);\n  } catch (error) {\n    console.error('Error updating payment:', error);\n    return NextResponse.json(\n      { error: 'Failed to update payment' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(request: NextRequest) {\n  try {\n    await connectToDatabase();\n    const { searchParams } = new URL(request.url);\n    const id = searchParams.get('id');\n\n    if (!id) {\n      return NextResponse.json(\n        { error: 'Payment ID is required' },\n        { status: 400 }\n      );\n    }\n\n    const payment = await Payment.findByIdAndDelete(id);\n\n    if (!payment) {\n      return NextResponse.json(\n        { error: 'Payment not found' },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json({ message: 'Payment deleted successfully' });\n  } catch (error) {\n    console.error('Error deleting payment:', error);\n    return NextResponse.json(\n      { error: 'Failed to delete payment' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,IAAA,yJAAiB;QACvB,MAAM,WAAW,MAAM,iKAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE;QAC7D,OAAO,mLAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,mLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,IAAA,yJAAiB;QACvB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,UAAU,MAAM,iKAAO,CAAC,MAAM,CAAC;QACrC,OAAO,mLAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,mLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,MAAM,OAAoB;IAC9C,IAAI;QACF,MAAM,IAAA,yJAAiB;QACvB,MAAM,EAAE,EAAE,EAAE,GAAG,SAAS,GAAG,MAAM,QAAQ,IAAI;QAC7C,MAAM,UAAU,MAAM,iKAAO,CAAC,iBAAiB,CAAC,IAAI,SAAS;YAAE,KAAK;QAAK;QAEzE,IAAI,CAAC,SAAS;YACZ,OAAO,mLAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,mLAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,mLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,OAAO,OAAoB;IAC/C,IAAI;QACF,MAAM,IAAA,yJAAiB;QACvB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,KAAK,aAAa,GAAG,CAAC;QAE5B,IAAI,CAAC,IAAI;YACP,OAAO,mLAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAyB,GAClC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,MAAM,iKAAO,CAAC,iBAAiB,CAAC;QAEhD,IAAI,CAAC,SAAS;YACZ,OAAO,mLAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA+B;IACrE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,mLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}